# TCP 기반 문서 공유 서버

IPv4와 TCP 소켓을 기반으로 한 클라이언트–서버 문서 공유 시스템입니다.  
다중 클라이언트 환경에서 문서의 생성, 조회, 수정이 가능하도록 설계되었으며,  
섹션 단위 동시성 제어를 통해 안정적인 쓰기 작업을 지원합니다.

## Overview
- TCP 소켓 기반 클라이언트–서버 구조
- 서버는 멀티스레드 방식으로 다중 클라이언트 병렬 처리
- 문서 단위가 아닌 **섹션 단위 쓰기 잠금**을 통한 동시성 제어
- Linux 환경에서 C++ 표준 라이브러리만을 사용해 구현

## Architecture
- **구조 도식화**
<img width="727" height="502" alt="스크린샷 2026-01-21 오후 2 03 55" src="https://github.com/user-attachments/assets/39421fff-1365-4d69-94cb-fc3979ae09aa" />

- **Client**
  - `config.txt` 파일을 통해 서버 IP와 포트 번호를 읽어 접속
  - 명령어(create, read, write, bye)를 서버로 전송
  - write 요청 시 줄 단위 입력을 처리하여 서버에 전달

- **Server**
  - Listening Socket을 생성하여 클라이언트 연결 대기
  - 클라이언트 요청을 독립적인 스레드에서 처리
  - `Docs` 디렉토리 내 문서 파일에 대한 접근 관리
  - 클라이언트 수를 atomic 변수로 관리하여 정상 종료 처리

## Command Processing
클라이언트로부터 전달받은 명령어는 문자열 파싱을 통해 처리됩니다.
- `SplitCommand` 함수에서 `stringstream`을 사용해 토큰 단위로 분리
- `create`, `read`, `write`, `bye` 등의 명령어를 구분하여 처리

## Concurrency Control (Write)
쓰기 작업은 **섹션 단위로 동시성 제어**가 이루어집니다.

- `SectionLock` 구조체
  - `mutex`: 해당 섹션에 대한 상호 배제
  - `condition_variable`: 대기 중인 클라이언트 관리
  - `queue`: 쓰기 요청을 FIFO 방식으로 처리

- `map<string, SectionLock>` 구조
  - 문서/섹션을 key로 하여 각 섹션의 잠금 상태 관리
  - 동적으로 섹션 잠금을 관리할 수 있도록 설계

이를 통해 여러 클라이언트가 동시에 접근하더라도,  
쓰기 작업은 순차적으로 안전하게 처리됩니다.

## C++ 사용 이유
- 풍부한 표준 라이브러리를 활용한 구현 용이성
- 빠르고 가벼운 성능으로 멀티스레드 처리에 적합
- Linux 환경에서 외부 라이브러리 없이 컴파일 가능

## Notes
본 프로젝트는 네트워크 통신과 동시성 제어의 기본 개념을 실제 코드로 구현하는 데 중점을 두었습니다.  
애플리케이션 레벨의 기능 구현뿐만 아니라, 서버의 동작 흐름과 자원 관리 관점에서 구조를 설계했습니다.
